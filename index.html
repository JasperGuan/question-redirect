<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<title>隨機分派中…</title>
<script>
  // 讀回 PID（若遺失就補產生一個，避免中斷）
  let pid = localStorage.getItem('PID');
  if (!pid) {
    pid = (crypto.randomUUID?.() ||
           Date.now().toString(36)+Math.random().toString(36).slice(2));
    localStorage.setItem('PID', pid);
  }

  // 後測兩份表單
  const longBase  = "https://docs.google.com/forms/d/e/1FAIpQLSfclaPWex8STzajaNnjkV79upw5maJYYtlAPOFMjZ3Ra_UHIw/viewform";
  const shortBase = "https://docs.google.com/forms/d/e/1FAIpQLSdQy9KoEh1OaJzV7PgWttS6wjCzOWFA9JWKGBVppm1-truiEw/viewform";

  // 識別碼欄位 ID
  const LONG_ID  = "329253494";
  const SHORT_ID = "957856911";

  function prefill(base, fieldId, value){
    const url = new URL(base);
    url.searchParams.set("usp", "pp_url");
    url.searchParams.set(`entry.${fieldId}`, value);
    return url.toString();
  }

  // 50/50 隨機分派並導向
  const target = Math.random() < 0.5
    ? prefill(longBase,  LONG_ID,  pid)
    : prefill(shortBase, SHORT_ID, pid);

  window.location.replace(target);
</script>
</head>
<body><p>正在隨機分派並導向後續問卷…</p></body>
</html>
